<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>light</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1.0, user-scalable=0">
    <style>
        body {
            animation: blinker 1s steps(1, end) infinite;
            /*background: #DDD;*/
        }

        @keyframes blinker {
            50% {
                background: #000
            }
        }
    </style>
</head>
<script>

    let url = 'ws://light.henrywu.tw:3000'
    var ws = new WebSocket(url)
    ws.onopen = () => {
    }
    ws.onclose = () => {
    }
    ws.onmessage = event => {

        let res = JSON.parse(event.data);
        // console.log(res)
        document.body.style.backgroundColor = 'rgb(' + res.r + ',' + res.g + ',' + res.b + ')';
        if (res.s <= 55) {
            document.body.style.animationDuration = ('0s'); // Change here
        } else {
            let time = ((200 - ((res.s) - 55)) - 0.05) * 0.45 / 200 + 0.05
            document.body.style.animationDuration = time + 's'; // Change here
        }


        //console.log(event)

    }


</script>

<body id="back" style="background-color: #000000">
    <footer style="
        background: #000;
        color: #FFF;
        text-align: center;
        position: fixed;
        width: 100%;
        left: 0;
        bottom: 0;
        padding: 5px 0;
        font-family: sans-serif;
        font-size: 12px;
    ">Made by Lyuchan and Henry Wu<br>Powered by MCUT Bot</footer>
</body>

</html>
